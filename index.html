<!doctype html>
<html>
<head>
	<meta charset="UTF-8">
	<meta http-equiv="cache-control" content="max-age=0" />
	<meta http-equiv="cache-control" content="no-cache" />
	<meta http-equiv="expires" content="0" />
	<meta http-equiv="expires" content="Tue, 01 Jan 1980 1:00:00 GMT" />
	<meta http-equiv="pragma" content="no-cache" />
	<script src="https://aframe.io/releases/0.5.0/aframe.min.js"></script>
	<script src="resources/js/argon.min.js"></script>
	<script src="resources/js/build.js"></script>
	<script src="resources/js/CSS3DArgonHUD.js"></script>
	<script src="resources/js/CSS3DArgonRenderer.js"></script>
	<script src="resources/js/aframe-look-at-component.js"></script>
	<script src="resources/js/aframe-animation-component.min.js"></script>
	<link rel="stylesheet" type="text/css" href="resources/css/style.css">
	<title>GA Tech Time Museum</title>
</head>

<body>
	<script>
		AFRAME.registerComponent('blurb-view-opener', {

			schema: {
				id_TitleCSS: {type: 'string'},
				id_BlurbCSS: {type: 'string'},
				positionString: {type: 'string'}
			},

			init: function (id_TitleCSS, id_BlurbCSS, positionString) {
				this.el.addEventListener('mouseenter', function (evt) {
					this.setAttribute('position', this.data.positionString);
					var titleCSS = document.getElementById(this.data.id_TitleCSS);
					titleCSS.setAttribute('visible', false);
					var blurbCSS = document.getElementById(this.data.id_BlurbCSS);
					blurbCSS.setAttribute('visible', true);
					// this.setAttribute('position', '0 0 0');
					// var titleCSS = document.getElementById('seedTitleCSS');
					// titleCSS.setAttribute('visible', false);
					// var blurbCSS = document.getElementById('seeedBlurbCSS');
					// blurbCSS.setAttribute('visible', true);
				});
				this.el.addEventListener('mouseleave', function (evt) {
					this.setAttribute('material', 'opacity', 1.0);
				});
			}
		});

		AFRAME.registerComponent('blurb-view-close', {
			schema: {
				id_Artifact: {type: 'string'},
				id_TitleCSS: {type: 'string'},
				id_BlurbCSS: {type: 'string'}
			},
			init: function () {
				this.el.addEventListener('mouseleave', function (evt) {
					var seed = document.getElementById(this.data.id_Artifact);
					seedPod.setAttribute('position', this.data.positionString);
					var titleCSS = document.getElementById(this.data.id_titleCSS);
					titleCSS.setAttribute('visible', true);
					var blurbCSS = document.getElementById(this.data.id_BlurbCSS);
					blurbCSS.setAttribute('visible', false);
				});
			}
		});
	</script>

	<!-- Seed Card -->
	<div id="seedTitle" class="textbox">Check out this seed!<br><br><br><br><br><br></div>
	<div id="seedBlurb" class="textbox">
		filler text filler text<br>
		filler text filler text<br>
		filler text filler text<br>
		filler text filler text<br>
		filler text filler text<br>
		filler text filler text
	</div>

	<ar-scene vr-mode-ui>
		<a-assets>
			<a-asset-item src="resources/images/QuadPanorama.jpg" id="quadPano"></a-asset-item>
			<a-asset-item src="resources/images/roomPanorama.jpg" id="roomPano"></a-asset-item>
			<a-asset-item src="resources/models/portalRing.obj" id="portalRing-obj" ></a-asset-item>
			<a-asset-item src="resources/models/portalRing.mtl" id="portalRing-mtl" ></a-asset-item>
			<a-asset-item src="resources/models/SeedPod.obj" id="SeedPod-obj" ></a-asset-item>
			<a-asset-item src="resources/models/SeedPod.mtl" id="SeedPod-mtl" ></a-asset-item>
		</a-assets>

		<a-entity light="type: ambient; color: #CCC" intensity="3"></a-entity>
		<!-- <a-entity id="camera"> -->
		<!-- <a-entity camera look-controls wasd-controls > -->
		
		<ar-camera>
			<a-entity id="myCursor" cursor="fuse:true; fuse-timeout: 1000"
			position="0 0 -0.1"
			geometry="primitive:ring; radiusInner: 0.0025; radiusOuter: 0.00375; thetaStart: 0; thetaLength: 360;"
			scale="1 1 1"
			rotation="0 0 90"
			material="color: #6666FF; shader:flat;opacity:0.8;">
				<!-- <a-animation begin="cursor-fusing"
				attribute="geometry.thetaLength"
				easing="ease-in-out-cubic"
				fill="forwards"
				from= "360"
				to="0"
				dur="1000"></a-animation> -->

				<!-- <a-animation begin="click"
				attribute="scale"
				easing="ease-in"
				fill="forwards"
				from= "0.1 0.1 0.1"
				to="1 1 1"
				dur="200"></a-animation>	-->  		   
			</a-entity> 
		</ar-camera>
		<!-- </a-entity> -->

		<a-entity id="sky">

			<a-sphere id="quad" src ="#quadPano" radius="100" opacity="0" side="double" selectable="false"></a-sphere>

			<a-entity id="future" position="0 74.5 0">
				<a-entity id="portalObject">
					<!-- <a-sphere class= "clickable" radius="1" opacity ="0" position="0 -2 0"></a-sphere> -->
					<a-box id="portal-plane" cursor-listener width= "10" height="0.1" depth="10" position="0 -31 0"></a-box>
					<a-box id="portal" cursor-listener width= "10" height="10" depth="10" position="0 5 0"></a-box>
					<a-obj-model id= "outerRing" src="#portalRing-obj" mtl="#portalRing-mtl"  scale = "10 10 10  ">
						<a-animation   attribute="rotation"
						from= "0 0 0"
						to="360 0 360"
						dur="5000"
						easing="linear"
						repeat="indefinite"
						></a-animation>
					</a-obj-model>
					<a-obj-model id= "middleRing" src="#portalRing-obj" mtl="#portalRing-mtl"  scale = "9 9 9 ">
						<a-animation   attribute="rotation"
						from= "0 0 0"
						to="0 360 360"
						dur="5000"
						easing="linear"
						repeat="indefinite"
						></a-animation>
					</a-obj-model>
					<a-obj-model id= "innerRing" src="#portalRing-obj" mtl="#portalRing-mtl"  scale = "8 8 8">
						<a-animation   attribute="rotation"
						from= "0 0 0"
						to="360 360 0"
						dur="5000"
						easing="linear"
						repeat="indefinite"
						></a-animation>
					</a-obj-model>
				</a-entity>

				<a-sphere id="room" src ="#roomPano" radius="25" opacity="0" side="double">
					
					<!-- Seed Artifact -->
					<a-entity position="4 -1 -15">
<!-- 						<a-sphere position="0 0 0" radius=".03" color="#ffff00"></a-sphere>
						<a-sphere position="5 0 0" radius=".03" color="#ff0000"></a-sphere>
						<a-sphere position="0 5 0" radius=".03" color="#00ff00"></a-sphere>
						<a-sphere position="0 0 5" radius=".03" color="#0000ff"></a-sphere> -->
						<a-entity id="seedTitleCSS" css-object="div: #seedTitle" scale="0.1 0.1 0.1" rotation="0 0 0" position="0 0 0"></a-entity>  
						<a-entity id="seedBlurbCSS" css-object="div: #seedBlurb" scale=".1 .1 .1" rotation="0 0 0" position="0 0 0" visible='false'></a-entity>
						<a-box opacity="1" id="seedMouseBox" curseor-listener blurb-view-close="id_Artifact: seedPod, id_titleCSS: seedTitleCSS, id_BlurbCSS: seedBlurbCSS" color='#BB00FF' position="0 0 0" height="20" width="40" depth="0" rotation="0 0 0" position="0 0 0"></a-box>
						<!-- <a-obj-model id="seedPod" cursor-listener blurb-view-opener="id_titleCSS: seedTitleCSS; id_blurbCSS: seedBlurbCSS; position: 3 -1 -10; " src="#SeedPod-obj" mtl="#SeedPod-mtl" opacity="0"></a-obj-model> -->
						<a-sphere id="seedPod" cursor-listener blurb-view-opener="id_titleCSS: seedTitleCSS; id_blurbCSS: seedBlurbCSS; position: 3 -1 -10" position="0 0 0" radius="2" color="#FFFAFA"></a-sphere>
					</a-entity>

				</a-sphere>

			</a-entity>
		</a-entity>
	</ar-scene>

	<script src="resources/js/gttm.js"></script>
</body>
</html>